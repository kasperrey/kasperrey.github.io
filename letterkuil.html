<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Letterkuil</title>
</head>
<body>
<button onclick="Button('a')" id="A">A</button><button onclick="Button('b')" id="B">B</button>
<button onclick="Button('c')" id="C">C</button><button onclick="Button('d')" id="D">D</button>
<button onclick="Button('e')" id="E">E</button><button onclick="Button('f')" id="F">F</button>
<button onclick="Button('g')" id="G">G</button><button onclick="Button('h')" id="H">H</button>
<button onclick="Button('i')" id="I">I</button><button onclick="Button('j')" id="J">J</button>
<button onclick="Button('k')" id="K">K</button><button onclick="Button('l')" id="L">L</button>
<button onclick="Button('m')" id="M">M</button><button onclick="Button('n')" id="N">N</button>
<button onclick="Button('o')" id="O">O</button><button onclick="Button('p')" id="P">P</button>
<button onclick="Button('q')" id="Q">Q</button><button onclick="Button('r')" id="R">R</button>
<button onclick="Button('s')" id="S">S</button><button onclick="Button('t')" id="T">T</button>
<button onclick="Button('u')" id="U">U</button><button onclick="Button('v')" id="V">V</button>
<button onclick="Button('w')" id="W">W</button><button onclick="Button('x')" id="X">X</button>
<button onclick="Button('y')" id="Y">Y</button><button onclick="Button('z')" id="Z">Z</button>
<button onclick="begin()" id="Begin">Begin</button><button onclick="selectAlles()" id="select">selecteer alles</button>
<button onclick="levels(1)">level 1</button><button onclick="levels(3)">level 3</button><button onclick="levels(6)">level 6</button>


<script>
    var canvas = document.createElement('canvas');
    canvas.width = 1500;
    canvas.height = 700;
    document.body.appendChild(canvas);
    var c = canvas.getContext('2d');
    c.font = "20px Arial";
    var geselekteerde_letters = [];
    var random_lijst = [];
    var start = false;
    var isBijGat = false;
    var x = 0;
    var snelheid = 20;
    var pac1 = new Image()
    var pac2 = new Image()
    var pac3 = new Image()
    var pac4 = new Image()
    var pac = 4
    var aantal_tekenen = 0
    var level = 1
    pac1.src = "pacman.png"
    pac2.src = "pacman2.png"
    pac3.src = "pacman3.png"
    pac4.src = "pacman4.png"
    addEventListener("keyup", function (ev) {
        if (ev.key === random_lijst.at(0)) {
            random_lijst.splice(0, 1);
            x-=25;
        }
    })
    lus();

    function getRandomInt(max) {
        return Math.floor(Math.random() * max);
    }

    function drawLine(x1, y1, x2,y2, stroke = 'white', width = 3) {
        c.beginPath();
        c.moveTo(x1, y1);
        c.lineTo(x2, y2);
        c.strokeStyle = stroke;
        c.lineWidth = width;
        c.stroke();
    }

    function begin() {
        var beginbutton = document.getElementById("Begin");
        beginbutton.innerText = "Stop";
        beginbutton.onclick = stop;
        for (var n=0; n<26; n++){
            random_lijst.push(geselekteerde_letters.at(getRandomInt(geselekteerde_letters.length)));
        }
        start = true;
    }

    function stop() {
        var beginbutton = document.getElementById("Begin");
        beginbutton.innerText = "Begin";
        beginbutton.onclick = begin;
        random_lijst = [];
        x = 0;
        start = false;
        level = 1
        snelheid = 30
    }

    function lus() {
        c.clearRect(0, 0, 1200, 700);
        c.fillStyle = "#868686"
        c.fillRect(1095, 110, 80, 25)
        c.fillStyle = "#000000"
        c.fillRect(680, 150, 520, 200)
        c.fillText(geselekteerde_letters.join(" "), 20, 20);
        c.fillText("level: "+level, 1100, 130)
        c.fillStyle = "#FFFFFF"
        drawLine(800, 260, 1200, 260);
        if (pac === 1) {
            c.drawImage(pac1, 575, 150)
            aantal_tekenen += 1
            if (aantal_tekenen === 20) {
                pac = 4
                aantal_tekenen = 0
            }
        } else if (pac === 2) {
            c.drawImage(pac3, 575, 150)
            aantal_tekenen += 1
            if (aantal_tekenen === 20) {
                pac = 1
                aantal_tekenen = 0
            }
        } else if (pac === 3) {
            c.drawImage(pac4, 575, 150)
            aantal_tekenen += 1
            if (aantal_tekenen === 20) {
                pac = 2
                aantal_tekenen = 0
            }
        } else if (pac === 4) {
            c.drawImage(pac2, 575, 150)
            aantal_tekenen += 1
            if (aantal_tekenen === 20) {
                pac = 3
                aantal_tekenen = 0
            }
        }
        if (start) {
            if (isBijGat) {
                snelheid = snelheid+2
                for (var r = 0; r < 26; r++) {
                    random_lijst.push(geselekteerde_letters.at(getRandomInt(geselekteerde_letters.length)));
                }
                x = 0
                isBijGat = false
                level -= 1
            }
            if (!random_lijst.length) {
                snelheid = snelheid-4
                for (var n = 0; n < 26; n++) {
                    random_lijst.push(geselekteerde_letters.at(getRandomInt(geselekteerde_letters.length)));
                }
                x = 0
                isBijGat = false
                level += 1
            }
            var xVanLetter = 1200 - x;
            for (var nRl = 0; nRl < random_lijst.length; nRl++) {
                if (xVanLetter > 775) {
                    c.fillText(random_lijst.at(nRl) + " ", xVanLetter, 240);
                } else {
                    random_lijst.splice(0, 1);
                    isBijGat = true;
                }
                xVanLetter += 25;
            }
            if (!isBijGat) {
                x += 1;
            }
        }
        setTimeout(lus, snelheid)
    }

    function Button(text) {
        var indexVanText = geselekteerde_letters.indexOf(text);
        if (indexVanText < 0) {
            geselekteerde_letters.push(text);
        } else {
            geselekteerde_letters.splice(indexVanText, 1);
        }
    }

    function selectAlles() {
        var select = document.getElementById("select")
        var staaterin = geselekteerde_letters.length;
        if (!staaterin) {
            for (var l=97; l<=122; l++) {
                geselekteerde_letters.push(String.fromCharCode(l));
            }
            console.log(geselekteerde_letters)
            select.innerText = "maak leeg"
        } else {
            geselekteerde_letters.splice(0, geselekteerde_letters.length);
            select.innerText = "selecteer alles"
        }
    }

    function levels(levels) {
        level = levels
        snelheid = 30-(4*(levels-1))
    }
</script>
</body>
</html>
